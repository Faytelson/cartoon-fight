(function(){var t={7474:function(t,e,a){"use strict";var s=a(6369),i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"app",attrs:{id:"app"}},[e("div",{staticClass:"app__container"},[e("div",{staticClass:"app__players"},t._l(t.players,(function(a){return e("Player",{key:a.id,attrs:{player:a,counter:t.counter}})})),1),e("div",{staticClass:"app__actions-panel"},[e("div",{staticClass:"app__buttons-container"},[t.isGameOn?t._e():e("div",{staticClass:"app__start-button"},[e("ButtonAction",{attrs:{button:t.buttonAction},on:{emitBtnClick:t.handleClick}})],1),t.isBack?e("div",{staticClass:"app__back-button"},[e("ButtonAction",{attrs:{button:t.buttonBack},on:{emitBtnClick:t.handleClick}})],1):t._e(),t.isGameOn&&!t.isBack?e("div",{staticClass:"app__buttons"},t._l(t.buttons,(function(a){return e("div",{key:a.id,staticClass:"app__button"},[e("ButtonAction",{attrs:{button:a},on:{emitBtnClick:t.handleClick}})],1)})),0):t._e()])]),t._l(t.logLines,(function(t,a){return e("div",{key:a,staticClass:"app__log-panel"},[e("LogPanel",{attrs:{line:t}})],1)})),t.isDialog?e("div",{staticClass:"app__dialog"},[e("Dialog",{attrs:{info:t.dialogInfo}})],1):t._e()],2)])},n=[],r=(a(560),function(){var t=this,e=t._self._c;return e("div",{staticClass:"player"},[e("div",{staticClass:"player__title"},[t._v(t._s(t.player.avatarDescription))]),e("div",{staticClass:"player__avatar"},[e("img",{staticClass:"player__avatar-img",attrs:{src:a(990)(`./${t.player.avatarSrc}`),alt:t.player.avatarDescription,title:t.player.avatarDescription}}),t.getAnimation?e("div",{staticClass:"player__avatar-cover"},["enemy"===t.player.id?e("div",{staticClass:"player__avatar-cover-container"},[e("img",{staticClass:"player__avatar-cover-img",attrs:{src:a(8274),alt:"Кровь"}})]):e("div",{staticClass:"player__avatar-cover-container"},[e("img",{staticClass:"player__avatar-cover-img player__avatar-cover-img_player",attrs:{src:a(8274),alt:"Кровь"}})])]):t._e(),t.getSpeech?e("div",{staticClass:"player__avatar-cover"},[(t.player.id,e("div",{staticClass:"player__avatar-cover-container"},[e("span",{staticClass:"player__avatar-cover-description"},[t._v(t._s(t.getCurrentMessage))])]))]):t._e()]),e("div",{staticClass:"player__health-bar"},[e("HealthBar",{attrs:{progress:t.getProgress}})],1)])}),l=[],o=function(){var t=this,e=t._self._c;return e("div",{staticClass:"health-bar"},[e("div",{staticClass:"health-bar__score"},[t._v(t._s(t.progress))]),e("div",{staticClass:"health-bar__track"},[e("div",{staticClass:"health-bar__progress",class:t.classes,style:`width: ${parseInt(t.getProgress)}%`})])])},c=[],u={name:"HealthBar",props:{progress:{type:Number,default:100}},computed:{getProgress(){return this.progress},classes(){let t=[];return this.getProgress<10?t=["health-bar__progress_red"]:this.getProgress<50&&(t=["health-bar__progress_yellow"]),t}}},p=u,h=a(1001),d=(0,h.Z)(p,o,c,!1,null,null,null),g=d.exports,_={name:"Player",components:{HealthBar:g},props:{player:{type:Object},counter:{type:Number,default:0}},computed:{getProgress(){return this.player.progress},getAnimation(){return this.player.animation},getCounter(){return this.counter},getCurrentMessage(){return this.player.messages[this.getCounter]},getSpeech(){return this.player.speech}}},m=_,v=(0,h.Z)(m,r,l,!1,null,"76049d08",null),f=v.exports,y=function(){var t=this,e=t._self._c;return e("button",{staticClass:"button-action",class:t.classes,attrs:{disabled:t.button.disabled},on:{click:t.emitEvent}},[e("span",{staticClass:"button-action__title"},[t._v(t._s(t.button.title))])])},b=[],C={name:"ButtonAction",components:{},props:{button:Object},data(){return{}},computed:{classes(){let t=[];return 1===this.button.id?t=["button-action_white"]:2===this.button.id?t=["button-action_red"]:3===this.button.id?t=["button-action_blue"]:4===this.button.id?t=["button-action_black"]:5===this.button.id&&(t=["button-action_pink"]),t}},methods:{emitEvent(){this.$emit("emitBtnClick",this.button.id)}}},k=C,D=(0,h.Z)(k,y,b,!1,null,null,null),w=D.exports,B=function(){var t=this,e=t._self._c;return e("div",{staticClass:"dialog"},[e("div",{staticClass:"dialog__info"},["start"===t.info.messageType?e("div",[e("p",[t._v("Твоя задача - победить злого Зайца.")]),e("p",[t._v("Атакуй врага каждый свой ход.")]),e("p",[t._v("Атаковать усиленным ударом можно после каждых 5 обычных ударов")]),e("p",[t._v("Поднять свое здоровье можно только один раз за всю игру, так что не увлекайся.")]),e("p",[t._v("Сдаться можно почти всегда, но не сдавайся, друг!")]),e("p",[t._v("В общем, поехали! Жми АТАКОВАТЬ")])]):"turn"===t.info.messageType&&"player"===t.getSide?e("p",[t._v("Держит удар "+t._s(t._f("capitalizeName")(t.getName)))]):"turn"===t.info.messageType&&"enemy"===t.getSide?e("p",[t._v("Получает "+t._s(t._f("capitalizeName")(t.getName)))]):"damage"===t.info.messageType&&"player"===t.getSide?e("p",[t._v(t._s(t._f("capitalizeName")(t.getName))+" получил "+t._s(t.getDamage)+" ед. урона")]):"damage"===t.info.messageType&&"enemy"===t.getSide?e("p",[t._v(t._s(t._f("capitalizeName")(t.getName))+" отхватил "+t._s(t.getDamage)+" ед. урона")]):"end success"===t.info.messageType?e("p",[e("span",[t._v("Ну и ну! Вот это победа!")]),e("embed",{attrs:{src:a(3733),width:"70",height:"45",align:"left",hidden:"",autostart:"",loop:"True"}})]):"end fail"===t.info.messageType?e("p",[e("span",[t._v("Тебя победил Заяц")]),e("video",{staticClass:"dialog__video",attrs:{autoplay:"",preload:"metadata"}},[e("source",{attrs:{src:a(671),type:"video/mp4"}})])]):t._e()])])},O=[],N={data(){return{}},props:{info:Object},computed:{getSide(){return this.info.side},getName(){return this.info.name},getDamage(){return this.info.damage}},filters:{capitalizeName(t){return t[0].toUpperCase()+t.slice(1)}}},P=N,x=(0,h.Z)(P,B,O,!1,null,null,null),A=x.exports,T=function(){var t=this,e=t._self._c;return e("div",{staticClass:"log-panel"},[e("div",{staticClass:"log-panel__line"},[e("div",{staticClass:"log-panel__turn"},[t._v("Ход "+t._s(t.line.counter+1))]),t.line.enemyDamage?e("div",{staticClass:"log-panel__enemy"},[t._v(" Враг получил "),e("span",[t._v(t._s(t.line.enemyDamage))]),t._v(" единиц урона. Так держать! ")]):t._e(),t.line.playerDamage?e("div",{staticClass:"log-panel__player"},[t._v(" Игрок получил "),e("span",[t._v(t._s(t.line.playerDamage))]),t._v(" единиц урона. Жаль! ")]):t._e()])])},L=[],I={props:{line:{type:Object,default:null}}},j=I,S=(0,h.Z)(j,T,L,!1,null,null,null),G=S.exports,Z={name:"App",components:{Player:f,ButtonAction:w,Dialog:A,LogPanel:G},data(){return{players:{enemy:{id:"enemy",avatarSrc:"hare.webp",avatarDescription:"Заяц",progress:100,damage:0,animation:!1,speech:!1,messages:["Расскажи, Снегурочка, где была? Расскажи-ка, милая, как дела?","А ну-ка, давай-ка, плясать выходи! А?","Аста ла виста, baby!","I'll be back","Киборги не чувствуют боли. Я чувствую","Ждёт моих подарочков ребятня! И тебе достанется от меня!","А ну-ка, давай-ка, плясать выходи! А?","Ха-ха-ха!","Я — шоколадный заяц, я — лясковый мерзавец, я — сладкий на все сто, о-о-о…","А нам всё равно, а нам всё равно, хоть боимся мы волка и сову","Меня нельзя подкупить. Со мной не договориться. Мне не ведомы жалость, раскаяние или страх","В теле человека 215 костей, я сломал всего одну"]},player:{id:"player",avatarSrc:"wolf.webp",avatarDescription:"Волк",progress:100,damage:0,animation:!1,speech:!1,messages:["Ну, Заяц! Ну, Абдурахман! Ну, погоди-и-и-и!","За тобою бегала, Дед Мороз. Пролила немало я горьких слёз!","Нет, Дед Мороз! Нет, Дед Мороз! Нет, Дед Мороз, погоди!","Потише, железный мозг!","Где твой самообучающийся процессор?","И наконец, сбываются все мечты. Лучший мой подарочек — это ты!","Нет, Дед Мороз, нет, Дед Мороз, нет, Дед Мороз, погоди!","Ну, погоди! Ещё — не вечер!","Ай! Ну, Дед Мороз, ну, Дед Мороз, ну, Дед Мороз, погоди-и-и-и!","Ну, Заяц...","И верю я — наступит встреча под крышей дома твоего!","Ну, шкелет, погоди!"]}},buttons:[{title:"Атаковать",id:1,disabled:!1},{title:"Усиленная атака",id:2,disabled:!0},{title:"Подлечиться",id:3,disabled:!1},{title:"Сдаться врагу",id:4,disabled:!1}],buttonAction:{title:"Начать игру",id:5,disabled:!1},buttonBack:{title:"В начало",id:6,disabled:!1},dialogInfo:{messageType:null,side:null,name:null,damage:null},counter:0,specialAttackCounter:0,isGameOn:!1,isDialog:!1,healthIncreased:!1,isBack:!1,looser:null,logLines:[]}},methods:{handleClick(t){1===t?(this.addLogLine(),this.attack("enemy")):2===t?(this.addLogLine(),this.attack("enemy",!0),this.specialAttackCounter=-1):3===t?(this.changeHealthProgress("player",!1,!0),this.healthIncreased=!0,this.handleButton(this.buttons[2],"disable")):4===t?this.announceGameOver("player"):5===t?(this.isGameOn=!0,this.disableAllButtons(),this.handleButton(this.buttons[0]),this.showDialog("start")):6===t&&this.reset()},setDelay(t){return new Promise((e=>{setTimeout((()=>{e()}),t)}))},attack(t,e){this.disableAllButtons(),this.showDialog("turn",t),this.setDelay(2e3).then((()=>(this.hideDialog(),this.animateBattle(t,!0),this.setDelay(4e3)))).then((()=>(this.animateBattle(t,!1),this.changeHealthProgress(t,e),this.setDelay(1e3)))).then((()=>(this.showDialog("damage",t),this.setDelay(2e3)))).then((()=>{this.hideDialog(),this.checkNextTurn(t)}))},handleButton(t,e){t.disabled="disable"===e},disableAllButtons(){this.buttons.forEach((t=>{this.handleButton(t,"disable")}))},showDialog(t,e){e&&(this.dialogInfo.side=e,this.dialogInfo.name=this.players[e].avatarDescription,this.dialogInfo.damage=this.players[e].damage),this.isDialog=!0,this.dialogInfo.messageType=t},hideDialog(){this.isDialog=!1,this.dialogInfo={messageType:null,side:null,name:null,damage:null}},throwRandomNum(){let t=Math.ceil(10*Math.random());return t+8},calculateProgress(t){let e=this.players[t];e.progress=Number(e.progress)-Number(e.damage),e.progress<=0?(e.progress=0,this.looser=e.id):this.progress>=100&&(e.progress=100)},changeHealthProgress(t,e,a){a?(this.players[t].damage=-this.throwRandomNum(),this.calculateProgress(t)):(this.players[t].damage=e?this.throwRandomNum()+5:this.throwRandomNum(),this.calculateProgress(t),"enemy"===t?this.logLines[this.counter].enemyDamage=this.players[t].damage:"player"===t&&(this.logLines[this.counter].playerDamage=this.players[t].damage))},animateBattle(t,e){this.players[t].animation=e;for(let a in this.players)a!==t&&(this.players[a].speech=e)},checkNextTurn(t){this.looser?this.announceGameOver(this.looser):"enemy"===t?this.attack("player"):(this.counter++,this.specialAttackCounter++,this.handleButton(this.buttons[0]),this.handleButton(this.buttons[3]),this.healthIncreased||this.handleButton(this.buttons[2]),this.buttons[1].disabled=this.specialAttackCounter<5)},addLogLine(){let t={counter:this.counter,enemyDamage:null,playerDamage:null};this.logLines.push(t)},announceGameOver(t){"enemy"===t?this.showDialog("end success"):this.showDialog("end fail"),this.isBack=!0},reset(){this.hideDialog(),this.counter=0,this.specialAttackCounter=0,this.isGameOn=!1,this.healthIncreased=!1,this.isBack=!1;for(let t in this.players)this.players[t].progress=100,this.players[t].damage=0;this.looser=null,this.logLines=[]}}},E=Z,H=(0,h.Z)(E,i,n,!1,null,null,null),M=H.exports;s.ZP.config.productionTip=!1,new s.ZP({render:t=>t(M)}).$mount("#app")},990:function(t,e,a){var s={"./blood.png":8274,"./hare.webp":1126,"./wolf.webp":2782};function i(t){var e=n(t);return a(e)}function n(t){if(!a.o(s,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return s[t]}i.keys=function(){return Object.keys(s)},i.resolve=n,t.exports=i,i.id=990},8274:function(t,e,a){"use strict";t.exports=a.p+"img/blood.eee6fb60.png"},1126:function(t,e,a){"use strict";t.exports=a.p+"img/hare.f303b252.webp"},2782:function(t,e,a){"use strict";t.exports=a.p+"img/wolf.e6e5b8ea.webp"},3733:function(t,e,a){"use strict";t.exports=a.p+"media/cricket-sound.05a083b4.mp3"},671:function(t,e,a){"use strict";t.exports=a.p+"media/foo.f2ae8d25.mp4"}},e={};function a(s){var i=e[s];if(void 0!==i)return i.exports;var n=e[s]={exports:{}};return t[s].call(n.exports,n,n.exports,a),n.exports}a.m=t,function(){var t=[];a.O=function(e,s,i,n){if(!s){var r=1/0;for(u=0;u<t.length;u++){s=t[u][0],i=t[u][1],n=t[u][2];for(var l=!0,o=0;o<s.length;o++)(!1&n||r>=n)&&Object.keys(a.O).every((function(t){return a.O[t](s[o])}))?s.splice(o--,1):(l=!1,n<r&&(r=n));if(l){t.splice(u--,1);var c=i();void 0!==c&&(e=c)}}return e}n=n||0;for(var u=t.length;u>0&&t[u-1][2]>n;u--)t[u]=t[u-1];t[u]=[s,i,n]}}(),function(){a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,{a:e}),e}}(),function(){a.d=function(t,e){for(var s in e)a.o(e,s)&&!a.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){a.p=""}(),function(){var t={143:0};a.O.j=function(e){return 0===t[e]};var e=function(e,s){var i,n,r=s[0],l=s[1],o=s[2],c=0;if(r.some((function(e){return 0!==t[e]}))){for(i in l)a.o(l,i)&&(a.m[i]=l[i]);if(o)var u=o(a)}for(e&&e(s);c<r.length;c++)n=r[c],a.o(t,n)&&t[n]&&t[n][0](),t[n]=0;return a.O(u)},s=self["webpackChunkcartoon_fight"]=self["webpackChunkcartoon_fight"]||[];s.forEach(e.bind(null,0)),s.push=e.bind(null,s.push.bind(s))}();var s=a.O(void 0,[998],(function(){return a(7474)}));s=a.O(s)})();
//# sourceMappingURL=app.9b708d51.js.map